{"version":3,"file":"defaults.js","sourceRoot":"","sources":["../../../../app/hubspot/src/config/defaults.ts"],"names":[],"mappings":";;;;;;;;;;;;;AACA,kDAoCC;AApCD,SAAgB,mBAAmB,CAAC,IAAqB;IACrD,IAAM,IAAI,GAAoB;QAC1B,OAAO,EAAE,wBAAwB;QACjC,SAAS,EAAE,KAAK;QAChB,SAAS,EAAE,iCAAiC;QAC5C,cAAc,EAAE;YACZ,MAAM,EAAE,kBAAkB;SAC7B;QACD,kBAAkB,EAAE,EAAE;QACtB,IAAI,EAAE,IAAI,CAAC,IAAI;QACf,KAAK,EAAE;YACH,WAAW,EAAE,CAAC;YACd,cAAc,EAAE,IAAI;YACpB,UAAU,EAAE,KAAK;YACjB,iBAAiB,EAAE,CAAC;YACpB,oBAAoB,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;YACzD,aAAa,EAAE,KAAK;YACpB,iBAAiB,EAAE,IAAI;SAC1B;QACD,SAAS,EAAE;YACP,+EAA+E;YAC/E,iBAAiB,EAAE,EAAE;YACrB,kBAAkB,EAAE,EAAE;YACtB,aAAa,EAAE,EAAE;YACjB,mBAAmB,EAAE,IAAI;SAC5B;QACD,KAAK,EAAE,EAAE;KACZ,CAAC;IACF,sCACO,IAAI,GACJ,IAAI,KACP,KAAK,wBAAO,IAAI,CAAC,KAAK,GAAK,IAAI,CAAC,KAAK,GACrC,SAAS,wBAAO,IAAI,CAAC,SAAS,GAAK,IAAI,CAAC,SAAS,GACjD,cAAc,wBAAO,IAAI,CAAC,cAAc,GAAK,IAAI,CAAC,cAAc,GAChE,kBAAkB,wBAAO,IAAI,CAAC,kBAAkB,GAAK,IAAI,CAAC,kBAAkB,KAC9E;AACN,CAAC","sourcesContent":["import type { ConnectorConfig } from \"../types/config\";\nexport function withDerivedDefaults(user: ConnectorConfig): ConnectorConfig {\n    const base: ConnectorConfig = {\n        baseUrl: \"https://api.hubapi.com\",\n        timeoutMs: 30000,\n        userAgent: \"connector-factory-hubspot/0.1.0\",\n        defaultHeaders: {\n            Accept: \"application/json\",\n        },\n        defaultQueryParams: {},\n        auth: user.auth,\n        retry: {\n            maxAttempts: 3,\n            initialDelayMs: 1000,\n            maxDelayMs: 30000,\n            backoffMultiplier: 2,\n            retryableStatusCodes: [408, 425, 429, 500, 502, 503, 504],\n            retryBudgetMs: 60000,\n            respectRetryAfter: true,\n        },\n        rateLimit: {\n            // HubSpot documented burst limit baseline (varies by plan); start conservative\n            requestsPerSecond: 15,\n            concurrentRequests: 10,\n            burstCapacity: 30,\n            adaptiveFromHeaders: true,\n        },\n        hooks: {},\n    };\n    return {\n        ...base,\n        ...user,\n        retry: { ...base.retry, ...user.retry },\n        rateLimit: { ...base.rateLimit, ...user.rateLimit },\n        defaultHeaders: { ...base.defaultHeaders, ...user.defaultHeaders },\n        defaultQueryParams: { ...base.defaultQueryParams, ...user.defaultQueryParams },\n    };\n}\n"]}