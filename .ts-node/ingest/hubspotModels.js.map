{"version":3,"file":"hubspotModels.js","sourceRoot":"","sources":["../../app/ingest/hubspotModels.ts"],"names":[],"mappings":"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","sourcesContent":["import ____moose____typia from \"typia\";\nimport { IngestPipeline, Key, OlapTable, DeadLetterModel, ClickHouseEngines } from \"@514labs/moose-lib\";\n/** Raw HubSpot deal data directly from API */\nexport interface HubSpotDealRaw {\n    id: Key<string>;\n    properties: HubSpotDealProperties;\n    createdAt: string;\n    updatedAt: string;\n    archived: boolean;\n    associations: HubSpotDealAssociations;\n}\nexport interface HubSpotDealProperties {\n    [key: string]: string | null | undefined;\n}\nexport interface HubSpotDealAssociations {\n    contacts: string[];\n    companies: string[];\n}\n/** Processed/normalized HubSpot deal data */\nexport interface HubSpotDeal {\n    id: Key<string>;\n    dealName: string;\n    amount: number;\n    currency: string;\n    stage: string;\n    stageLabel: string;\n    pipeline: string;\n    pipelineLabel: string;\n    dealType?: string;\n    closeDate?: Date;\n    createdAt: Date;\n    lastModifiedAt: Date;\n    ownerId?: string;\n    stageProbability: number;\n    forecastAmount: number;\n    projectedAmount: number;\n    daysToClose?: number;\n    isWon: boolean;\n    isClosed: boolean;\n    isArchived: boolean;\n    contactCount: number;\n    noteCount: number;\n    associatedContacts: string[];\n    associatedCompanies: string[];\n    customProperties: Record<string, any>;\n}\nexport const hubspotDeadLetterTable = new OlapTable<DeadLetterModel>(\"HubSpotDealDeadLetter\", {\n    orderByFields: [\"failedAt\"],\n}, ____moose____typia.json.schemas<[\n    DeadLetterModel\n]>(), JSON.parse(\"[{\\\"name\\\":\\\"originalRecord\\\",\\\"data_type\\\":\\\"Json\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"errorMessage\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"errorType\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"failedAt\\\",\\\"data_type\\\":\\\"DateTime\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"source\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]}]\") as any, {\n    validate: (data: unknown) => {\n        const result = ____moose____typia.createValidate<DeadLetterModel>()(data);\n        return {\n            success: result.success,\n            data: result.success ? result.data : undefined,\n            errors: result.success ? undefined : result.errors\n        };\n    },\n    assert: ____moose____typia.createAssert<DeadLetterModel>(),\n    is: ____moose____typia.createIs<DeadLetterModel>()\n});\n/** Raw HubSpot deal ingestion */\nexport const HubSpotDealRawPipeline = new IngestPipeline<HubSpotDealRaw>(\"HubSpotDealRaw\", {\n    table: false,\n    stream: true,\n    ingest: true,\n    deadLetterQueue: { destination: hubspotDeadLetterTable },\n}, ____moose____typia.json.schemas<[\n    HubSpotDealRaw\n]>(), JSON.parse(\"[{\\\"name\\\":\\\"id\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":true,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"properties\\\",\\\"data_type\\\":{\\\"keyType\\\":\\\"String\\\",\\\"valueType\\\":\\\"String\\\"},\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"createdAt\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"updatedAt\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"archived\\\",\\\"data_type\\\":\\\"Boolean\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"associations\\\",\\\"data_type\\\":{\\\"name\\\":\\\"HubSpotDealAssociations\\\",\\\"columns\\\":[{\\\"name\\\":\\\"contacts\\\",\\\"data_type\\\":{\\\"elementNullable\\\":false,\\\"elementType\\\":\\\"String\\\"},\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"companies\\\",\\\"data_type\\\":{\\\"elementNullable\\\":false,\\\"elementType\\\":\\\"String\\\"},\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]}],\\\"jwt\\\":false},\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]}]\") as any, {\n    validate: (data: unknown) => {\n        const result = ____moose____typia.createValidate<HubSpotDealRaw>()(data);\n        return {\n            success: result.success,\n            data: result.success ? result.data : undefined,\n            errors: result.success ? undefined : result.errors\n        };\n    },\n    assert: ____moose____typia.createAssert<HubSpotDealRaw>(),\n    is: ____moose____typia.createIs<HubSpotDealRaw>()\n});\n/** Processed HubSpot deal storage */\nexport const HubSpotDealPipeline = new IngestPipeline<HubSpotDeal>(\"HubSpotDeal\", {\n    table: { engine: ClickHouseEngines.MergeTree, orderByFields: [\"id\"] }, // Store processed data in ClickHouse\n    stream: true, // Buffer processed records\n    ingest: false, // No direct API; only derived from raw data\n    deadLetterQueue: {\n        destination: hubspotDeadLetterTable,\n    },\n}, ____moose____typia.json.schemas<[\n    HubSpotDeal\n]>(), JSON.parse(\"[{\\\"name\\\":\\\"id\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":true,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"dealName\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"amount\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"currency\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"stage\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"stageLabel\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"pipeline\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"pipelineLabel\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"dealType\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":false,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"closeDate\\\",\\\"data_type\\\":\\\"DateTime\\\",\\\"primary_key\\\":false,\\\"required\\\":false,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"createdAt\\\",\\\"data_type\\\":\\\"DateTime\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"lastModifiedAt\\\",\\\"data_type\\\":\\\"DateTime\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"ownerId\\\",\\\"data_type\\\":\\\"String\\\",\\\"primary_key\\\":false,\\\"required\\\":false,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"stageProbability\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"forecastAmount\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"projectedAmount\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"daysToClose\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":false,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"isWon\\\",\\\"data_type\\\":\\\"Boolean\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"isClosed\\\",\\\"data_type\\\":\\\"Boolean\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"isArchived\\\",\\\"data_type\\\":\\\"Boolean\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"contactCount\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"noteCount\\\",\\\"data_type\\\":\\\"Float\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"associatedContacts\\\",\\\"data_type\\\":{\\\"elementNullable\\\":false,\\\"elementType\\\":\\\"String\\\"},\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"associatedCompanies\\\",\\\"data_type\\\":{\\\"elementNullable\\\":false,\\\"elementType\\\":\\\"String\\\"},\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]},{\\\"name\\\":\\\"customProperties\\\",\\\"data_type\\\":\\\"Json\\\",\\\"primary_key\\\":false,\\\"required\\\":true,\\\"unique\\\":false,\\\"default\\\":null,\\\"annotations\\\":[]}]\") as any, {\n    validate: (data: unknown) => {\n        const result = ____moose____typia.createValidate<HubSpotDeal>()(data);\n        return {\n            success: result.success,\n            data: result.success ? result.data : undefined,\n            errors: result.success ? undefined : result.errors\n        };\n    },\n    assert: ____moose____typia.createAssert<HubSpotDeal>(),\n    is: ____moose____typia.createIs<HubSpotDeal>()\n});\n"]}